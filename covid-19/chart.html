
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script type="text/javascript">
    window.onload = function() {
        $.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv", function(data) {
            data=data.split(/\r?\n/);
            datum=[];
            chartdata1=[];
            chartdata2=[];
            chartdata3=[];
            for(i=0; i<data.length; i++){
                d=data[i].split(/,/);
                if(d[1].match(/Country.Region/)){
                    for(j=4;j<d.length;j++){
                        datum.push(new Date(d[j]));
                    }
                }
                if((d[0]+d[1]).match(/Germany|Sweden|FranceFra|Japan|Korea|Czech|Italy|Spain|Austria|Poland|Slovaki|Switzerland|HubeiChina/)){
                    a1=[];
                    a2=[];
                    a3=[];
                    name=d[1];
                    if(d[0]) name=d[0];
                    if(d[1].match(/Korea/)){
						name="South Korea";
						for(j=5;j<d.length;j++){
							a1.push({x: datum[j-5], y: parseInt(d[j])});
							if(j>=5+5)
								a2.push({x: datum[j-5], y: parseInt(d[j])-parseInt(d[j-5])});
							if(j>=5+1)
								a3.push({x: datum[j-5], y: parseInt(d[j])-parseInt(d[j-1])});
						}						
					} else {
						for(j=4;j<d.length;j++){
							a1.push({x: datum[j-4], y: parseInt(d[j])});
							if(j>=4+5)
								a2.push({x: datum[j-4], y: parseInt(d[j])-parseInt(d[j-5])});
							if(j>=4+1)
								a3.push({x: datum[j-4], y: parseInt(d[j])-parseInt(d[j-1])});
						}
					}
					
                    chartdata1.push({
                        name: name,
                        type: "spline",
                        showInLegend: true,
                        dataPoints: a1
                    });
                    chartdata2.push({
                        name: name,
                        type: "spline",
                        showInLegend: true,
                        dataPoints: a2
                    });
                    chartdata3.push({
                        name: name,
                        type: "spline",
                        showInLegend: true,
                        dataPoints: a3
                    });
                }
            }
            
            var chart1 = new CanvasJS.Chart("chartContainer1", {
                title: {
                     text: "COVID-19 Confirmed",
                },
                legend:{
                    cursor:"pointer",
                    itemclick : toggleDataSeries
                },

                data: chartdata1
            });
            chart1.render();
            
            var chart2 = new CanvasJS.Chart("chartContainer2", {
                title: {
                     text: "COVID-19 Conf / 5 days difference",
                },
                legend:{
                    cursor:"pointer",
                    itemclick : toggleDataSeries
                },

                data: chartdata2
            });
            chart2.render();

            var chart3 = new CanvasJS.Chart("chartContainer3", {
                title: {
                     text: "COVID-19 Conf / 1 days difference",
                },
                legend:{
                    cursor:"pointer",
                    itemclick : toggleDataSeries
                },

                data: chartdata3
            });
            chart3.render();
            
			function toggleDataSeries(e) {
				if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible ){
					e.dataSeries.visible = false;
				} else {
					e.dataSeries.visible = true;
				}
				chart1.render();
				chart2.render();
				chart3.render();
			}

        });
        
    }
</script>
</head>
<body>
	<div id="chartContainer1" style="width:100%; height:400px;"></div>
	<br /><br />
	<div id="chartContainer2" style="width:100%; height:400px;"></div>
	<br /><br />
	<div id="chartContainer3" style="width:100%; height:400px;"></div>
</body>
</html>
